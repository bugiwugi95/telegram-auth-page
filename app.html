<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§—É—Ç–±–æ–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏—Ç–∏–∫ | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ========================================================================= */
        /* CSS –°—Ç–∏–ª–∏ –¥–ª—è UI (–í–ó–Ø–¢–´ –ò–ó –í–ê–®–ï–ì–û –ò–°–•–û–î–ù–û–ì–û –§–ê–ô–õ–ê) */
        /* ========================================================================= */
        :root {
            --tg-bg: var(--tg-theme-bg-color, #f0f4f7);
            --tg-secondary-bg: var(--tg-theme-secondary-bg-color, #ffffff);
            --tg-text: var(--tg-theme-text-color, #000000);
            --tg-link: var(--tg-theme-link-color, #0088cc);
            --background: var(--tg-secondary-bg);
            --foreground: var(--tg-text);
            --blue-600: #2563eb;
            --blue-100: #dbeafe;
            --blue-900: #1e3a8a;
            --blue-50: #eff6ff;
            --slate-600: #475569;
            --green-600: #16a34a;
            --red-600: #dc2626;
            --red-100: #fee2e2;
            --border: rgba(0, 0, 0, 0.1);
            --font-weight-medium: 500;
            --radius: 0.625rem;
        }

        body {
            font-family: 'Roboto', sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI";
            margin: 0;
            padding: 0;
            background-color: var(--tg-bg);
            color: var(--foreground);
            min-height: 100vh;
            padding-bottom: 4.5rem; 
        }
        .app-content { width: 100%; max-width: 450px; margin: 0 auto; display: block !important; }
        
        /* Utility Classes */
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .pb-8 { padding-bottom: 2rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .space-y-3 > * + * { margin-top: 0.75rem; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .gap-3 { gap: 0.75rem; }
        .grid { display: grid; }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .w-full { width: 100%; }

        /* Components */
        .header-bg { background-color: var(--blue-600); color: var(--background); }
        .text-blue-100 { color: var(--blue-100); }
        .text-blue-900 { color: var(--blue-900); }
        .text-slate-600 { color: var(--slate-600); }
        .card { background-color: var(--background); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05); }
        .stat-icon-blue { background-color: var(--blue-100); color: var(--blue-600); }
        .stat-icon-red { background-color: var(--red-100); color: var(--red-600); }
        .rounded-full { border-radius: 9999px; }
        .last-match-card { background-color: var(--blue-50); border-color: var(--blue-100); border-width: 2px; }
        .last-match-badge { background-color: var(--green-600); color: var(--background); }
        .last-match-button { background-color: var(--blue-600); color: var(--background); height: 3rem; text-decoration: none; display: flex; align-items: center; justify-content: center; padding: 0 1rem; border-radius: var(--radius); font-weight: 500; }
        .badge-draw { background-color: #fef9c3; color: #a16207; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –≠–∫—Ä–∞–Ω—ã */
        .bottom-nav { 
             position: fixed; bottom: 0; left: 0; right: 0; height: 4.5rem; 
             background-color: var(--background); border-top: 1px solid var(--border); 
             box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05); display: flex; 
             justify-content: space-around; align-items: center; z-index: 100;
        }
        .nav-item { /* ... —Å—Ç–∏–ª–∏ ... */ }
        .nav-item-active { color: var(--blue-600); }
        .nav-icon { font-size: 1.25rem; margin-bottom: 0.25rem; }
        .screen { display: none; width: 100%; }
        .active-screen { display: block; }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ —Ç–æ–∫–µ–Ω–∞ */
        .token-error { 
             position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
             background-color: var(--tg-bg); color: var(--tg-text); 
             display: flex; flex-direction: column; align-items: center; justify-content: center;
             text-align: center; padding: 20px; z-index: 200;
        }
    </style>
</head>
<body>
    
    <div id="main-app" class="app-content">
        
        <div id="dashboard-screen" class="screen active-screen">
            <div class="header-bg p-6 pb-8">
                <div class="flex items-center gap-3 mb-2">
                    <span style="color: white; font-size: 1.25rem;">üè†</span>
                    <h1>–ì–ª–∞–≤–Ω–∞—è</h1>
                </div>
                <p class="text-blue-100">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è <span id="welcome-user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span></p>
            </div>

            <div class="p-4 -mt-4">
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <div class="card p-4" style="border-width: 2px; border-color: var(--blue-100);">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 rounded-full stat-icon-blue flex items-center justify-center">
                                <span>üìà</span>
                            </div>
                        </div>
                        <div class="text-slate-600 mb-1">–í–ª–∞–¥–µ–Ω–∏–µ</div>
                        <div class="text-blue-900">58%</div>
                    </div>
                    <div class="card p-4" style="border-width: 2px; border-color: var(--blue-100);">
                        <div class="flex items-center gap-3 mb-2">
                            <div class="w-10 h-10 rounded-full stat-icon-red flex items-center justify-center">
                                <span>‚ö†Ô∏è</span>
                            </div>
                        </div>
                        <div class="text-slate-600 mb-1">–ü–æ—Ç–µ—Ä–∏</div>
                        <div class="text-blue-900">23</div>
                    </div>
                </div>

                <div class="mb-4">
                    <h2 class="text-blue-900 mb-3">–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–∞—Ç—á</h2>
                    <div class="card p-4 last-match-card">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-2">
                                <span style="color: var(--blue-600);">üìÖ</span>
                                <span class="text-slate-700">28 –æ–∫—Ç 2025</span>
                            </div>
                            <div class="badge last-match-badge">–ü–æ–±–µ–¥–∞</div>
                        </div>
                        <div class="flex items-center justify-between mb-3 text-blue-900">
                            <span>vs –§–ö –°–ø–∞—Ä—Ç–∞–∫</span>
                            <span>2:1</span>
                        </div>
                        <button onclick="navigate('analytics')" class="last-match-button w-full">
                            –û—Ç–∫—Ä—ã—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É
                        </button>
                    </div>
                </div>

                <div>
                    <h2 class="text-blue-900 mb-3">–í—Å–µ –º–∞—Ç—á–∏</h2>
                    <div class="space-y-3">
                        <div class="card p-4 border border-slate-200 cursor-pointer hover:border-blue-700 transition-colors" onclick="navigate('analytics')">
                            <div class="flex items-center justify-between mb-2">
                                <div class="flex items-center gap-2">
                                    <span class="text-slate-600">21 –æ–∫—Ç 2025</span>
                                </div>
                                <div class="badge badge-draw">–ù–∏—á—å—è</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="analytics-screen" class="screen">
            <div class="header-bg p-6 pb-8">
                <div class="flex items-center gap-3 mb-2">
                    <span style="color: white; font-size: 1.25rem;">üìä</span>
                    <h1>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –º–∞—Ç—á–∞</h1>
                </div>
                <p class="text-blue-100">–§–ö –°–ø–∞—Ä—Ç–∞–∫ ‚Ä¢ 28 –æ–∫—Ç 2025</p>
            </div>
            <div class="p-4 -mt-4">
                <div class="card p-4" style="border: 2px solid var(--blue-100);">
                    <h3 class="text-blue-900 mb-2">–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <p class="text-slate-600">–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ç–∞–±–ª–∏—Ü–∞ –∏ –≥—Ä–∞—Ñ.</p>
                </div>
            </div>
        </div>

        <div id="players-screen" class="screen">
            <div class="header-bg p-6 pb-8">
                <div class="flex items-center gap-3 mb-2">
                    <span style="color: white; font-size: 1.25rem;">üë§</span>
                    <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞</h1>
                </div>
                <p class="text-blue-100">–ü–æ–¥—Ä–æ–±–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
            </div>
            <div class="p-4 -mt-4">
                <div class="card p-4" style="border: 2px solid var(--blue-100);">
                    <h3 class="text-blue-900 mb-2">–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω</h3>
                    <p class="text-slate-600">–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–≥—Ä–æ–∫–∞, –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π.</p>
                </div>
            </div>
        </div>
        
        <div class="bottom-nav">
            <a href="#" onclick="navigate('dashboard')" id="nav-dashboard" class="nav-item nav-item-active">
                <span class="nav-icon">üè†</span>
                <span>–ì–ª–∞–≤–Ω–∞—è</span>
            </a>
            <a href="#" onclick="navigate('analytics')" id="nav-analytics" class="nav-item">
                <span class="nav-icon">üìä</span>
                <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
            </a>
            <a href="#" onclick="navigate('players')" id="nav-players" class="nav-item">
                <span class="nav-icon">üë§</span>
                <span>–ò–≥—Ä–æ–∫–∏</span>
            </a>
        </div>
    </div>

    <div id="token-error" class="token-error" style="display: none;">
        <h2>‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞</h2>
        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.</p>
        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram.</p>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        function navigate(page) {
            document.querySelectorAll('.screen').forEach(el => el.classList.remove('active-screen'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('nav-item-active'));
            
            const screenElement = document.getElementById(`${page}-screen`);
            const navElement = document.getElementById(`nav-${page}`);
            
            if (screenElement) {
                screenElement.classList.add('active-screen');
            }
            if (navElement) {
                navElement.classList.add('nav-item-active');
            }
            
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.expand();
            }
        }
        
        // –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initApp() {
            const token = localStorage.getItem('jwt_token');
            const userName = localStorage.getItem('user_name') || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            
            if (!token) {
                // –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω–∞ –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É
                document.getElementById('token-error').style.display = 'flex';
                // –û—á–∏—â–∞–µ–º localStorage –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
                localStorage.clear(); 
                return;
            }

            // –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º UI
            document.getElementById('welcome-user').textContent = userName;
            document.getElementById('main-app').style.display = 'block';

            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.expand();
            }
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞ –î–∞—à–±–æ—Ä–¥–µ
            navigate('dashboard');
        }

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
